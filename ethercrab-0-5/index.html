<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css?family=Fira+Mono|Open+Sans|Oswald|Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&display=swap"
    rel="stylesheet"
  />
  <link rel="stylesheet" href="https://wapl.es/index.css" />

  <link rel="stylesheet" type="text/css" href="/syntax-theme-dark.css" media="(prefers-color-scheme: dark)" />
  <link rel="stylesheet" type="text/css" href="/syntax-theme-light.css" media="(prefers-color-scheme: light)" />
  
   
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://wapl.es/atom.xml"> 
  <link rel="alternate" type="application/atom+xml" title="Atom" href="https://wapl.es/atom.xml"> 
  

  <title>EtherCrab 0.5: Not Much In A Name</title>
  <meta
    name="description"
    content="Personal blog of Rust developer and hobby CNC machinist James Waples. Living in Edinburgh, Scotland üè¥Û†ÅßÛ†Å¢Û†Å≥Û†Å£Û†Å¥Û†Åø ‚ù§Ô∏è"
  />
  <meta
    name="og:description"
    content="Personal blog of Rust developer and hobby CNC machinist James Waples. Living in Edinburgh, Scotland üè¥Û†ÅßÛ†Å¢Û†Å≥Û†Å£Û†Å¥Û†Åø ‚ù§Ô∏è"
  />
  <meta
    name="twitter:description"
    content="Personal blog of Rust developer and hobby CNC machinist James Waples. Living in Edinburgh, Scotland üè¥Û†ÅßÛ†Å¢Û†Å≥Û†Å£Û†Å¥Û†Åø ‚ù§Ô∏è"
  />

  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width initial-scale=1" />

  

  <link
    rel="apple-touch-icon"
    sizes="57x57"
    href="https://wapl.es/favicon/apple-icon-57x57.png"
  />
  <link
    rel="apple-touch-icon"
    sizes="60x60"
    href="https://wapl.es/favicon/apple-icon-60x60.png"
  />
  <link
    rel="apple-touch-icon"
    sizes="72x72"
    href="https://wapl.es/favicon/apple-icon-72x72.png"
  />
  <link
    rel="apple-touch-icon"
    sizes="76x76"
    href="https://wapl.es/favicon/apple-icon-76x76.png"
  />
  <link
    rel="apple-touch-icon"
    sizes="114x114"
    href="https://wapl.es/favicon/apple-icon-114x114.png"
  />
  <link
    rel="apple-touch-icon"
    sizes="120x120"
    href="https://wapl.es/favicon/apple-icon-120x120.png"
  />
  <link
    rel="apple-touch-icon"
    sizes="144x144"
    href="https://wapl.es/favicon/apple-icon-144x144.png"
  />
  <link
    rel="apple-touch-icon"
    sizes="152x152"
    href="https://wapl.es/favicon/apple-icon-152x152.png"
  />
  <link
    rel="apple-touch-icon"
    sizes="180x180"
    href="https://wapl.es/favicon/apple-icon-180x180.png"
  />
  <link
    rel="icon"
    type="image/png"
    sizes="192x192"
    href="https://wapl.es/favicon/android-icon-192x192.png"
  />
  <link
    rel="icon"
    type="image/png"
    sizes="32x32"
    href="https://wapl.es/favicon/favicon-32x32.png"
  />
  <link
    rel="icon"
    type="image/png"
    sizes="96x96"
    href="https://wapl.es/favicon/favicon-96x96.png"
  />
  <link
    rel="icon"
    type="image/png"
    sizes="16x16"
    href="https://wapl.es/favicon/favicon-16x16.png"
  />
  <meta name="msapplication-TileColor" content="#eeeeee" />
  <meta
    name="msapplication-TileImage"
    content="https://wapl.es/favicon/ms-icon-144x144.png"
  />
  <meta name="theme-color" content="#eeeeee" />

  <link
    rel="canonical"
    href="https:&#x2F;&#x2F;wapl.es&#x2F;ethercrab-0-5&#x2F;"
  />
</head>


  <body class="">
    
<div class="post__header ">
  <header class="header" role="banner">
  <div class="wrap">
    <a class="site-title" href="https:&#x2F;&#x2F;wapl.es/">
      <h1 class="header__logo">
        <img src="https://wapl.es/images/logo-100-circle.png" alt="Hello it me, James. This
        is a picture of a banana trifle." />
        <span>James Waples&#x27; Internet Hole</span>
      </h1>
    </a>

    <aside class="header__links">
      <a href="/atom.xml" class="header__links__link">
        <span class="header__links__link__text">RSS</span>
        <svg alt="RSS" xmlns="http://www.w3.org/2000/svg" viewBox="0 -256 32 32">
          <path
            d="M8.7-228.4q0 1.9-1.2 3.1-1.3 1.3-3.1 1.3-1.9 0-3.1-1.3-1.3-1.2-1.3-3 0-1.9 1.3-3.2 1.2-1.2 3-1.2 1.9 0 3.2 1.2 1.2 1.3 1.2 3.1zm11.7 2.8q0 .7-.4 1.1-.4.5-1 .5h-3.2q-.5 0-1-.4-.3-.4-.4-1-.5-5.1-4.2-8.8-3.7-3.7-8.9-4.2-.6 0-1-.5-.3-.4-.3-1v-3q0-.7.5-1 .4-.5 1-.5 3.7.3 7 1.9 3.3 1.5 6 4 2.5 2.7 4 6 1.6 3.3 1.9 7zm11.6 0q0 .7-.4 1.1-.4.5-1 .5h-3.3q-.6 0-1-.4t-.5-1q-.2-4.9-2.3-9.3-2-4.3-5.2-7.6-3.3-3.2-7.7-5.2T1.4-250q-.6 0-1-.4t-.4-1v-3.2q0-.7.5-1 .4-.5 1-.5 6 .3 11.4 2.7 5.5 2.5 9.7 6.7 4.2 4.2 6.7 9.7 2.4 5.4 2.7 11.4z"
            fill="currentColor"
          />
        </svg>
      </a>

      <a href="https://github.com/jamwaffles" target="_blank" class="header__links__link">
        <span class="header__links__link__text">Github</span>
        <svg
          alt="Github"
          xmlns="http://www.w3.org/2000/svg"
          width="43.438"
          height="42.366"
          viewBox="0 0 11.493 11.209"
        >
          <path
            d="M5.746 0A5.747 5.747 0 003.93 11.2c.287.052.392-.125.392-.278 0-.136-.005-.497-.008-.977-1.598.347-1.935-.77-1.935-.77-.262-.664-.639-.841-.639-.841-.521-.356.04-.35.04-.35.577.041.88.593.88.593.513.878 1.345.625 1.673.477.052-.37.2-.624.364-.768-1.276-.145-2.617-.638-2.617-2.84 0-.627.224-1.14.591-1.542-.059-.145-.256-.73.057-1.52 0 0 .482-.155 1.58.588.458-.127.95-.19 1.438-.193.489.002.98.066 1.44.193 1.096-.743 1.578-.589 1.578-.589.313.792.116 1.376.057 1.521.369.402.59.915.59 1.542 0 2.208-1.343 2.694-2.623 2.836.206.177.39.528.39 1.064 0 .768-.007 1.388-.007 1.576 0 .154.104.333.395.277A5.749 5.749 0 005.746 0"
            fill="currentColor"
            fill-rule="evenodd"
          />
        </svg>
      </a>

      <a href="https://wapl.es/cv/" target="_blank" class="header__links__link">
        <span class="header__links__link__text">CV/Resume</span>

        <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 384 512">
          <!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
          <path
            d="M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128z"
            fill="currentColor"
          />
        </svg>
      </a>
    </aside>

    <hr />
  </div>
</header>

</div>


<article role="main" class="post ">
  <header>
    <a href="https:&#x2F;&#x2F;wapl.es" id="home_link">¬´ Posts list</a>
    <div class="post__title">
      <h1>EtherCrab 0.5: Not Much In A Name</h1>

      <time datetime="2024-07-28">
        <a href="https://wapl.es/ethercrab-0-5/">July 28, 2024</a>
      </time>
    </div>
  </header>

  <div class="post__text" id="js-post-content"><p>I've just released <a href="https://crates.io/crates/ethercrab/0.5.0">EtherCrab 0.5.0</a>
(<a href="https://lib.rs/crates/ethercrab">lib.rs</a>), the pure Rust EtherCAT MainDevice. This is a smaller
release than usual, with added support for FreeBSD/NetBSD and a bunch of renamed items in the public
API. The full changelog can be found
<a href="https://github.com/ethercrab-rs/ethercrab/blob/master/CHANGELOG.md">here</a>.</p>
<span id="continue-reading"></span><h1 id="renamed-items"><a class="zola-anchor" href="#renamed-items" aria-label="Anchor link for: renamed-items">Renamed items</a></h1>
<p>This release removes the "master" and "slave" terminology in favour of the ETG-specified
"MainDevice" and "SubDevice" respectively. The full list of changes is as follows:</p>
<table><thead><tr><th>Type</th><th>Old</th><th>New</th></tr></thead><tbody>
<tr><td><code>enum</code></td><td><code>SlaveState</code></td><td><code>SubDeviceState</code></td></tr>
<tr><td><code>fn</code></td><td><code>Client::num_slaves()</code></td><td><code>MainDevice::num_subdevices()</code></td></tr>
<tr><td><code>fn</code></td><td><code>Ds402::slave()</code></td><td><code>Ds402::subdevice()</code></td></tr>
<tr><td><code>fn</code></td><td><code>SlaveGroup::slave()</code></td><td><code>SubDeviceGroup::subdevice()</code></td></tr>
<tr><td><code>mod</code></td><td><code>ethercrab::slave_group</code></td><td><code>ethercrab::subdevice_group</code></td></tr>
<tr><td><code>struct</code></td><td><code>Client</code></td><td><code>MainDevice</code></td></tr>
<tr><td><code>struct</code></td><td><code>ClientConfig</code></td><td><code>MainDeviceConfig</code></td></tr>
<tr><td><code>struct</code></td><td><code>GroupSlaveIterator</code></td><td><code>GroupSubDeviceIterator</code></td></tr>
<tr><td><code>struct</code></td><td><code>Slave</code></td><td><code>SubDevice</code></td></tr>
<tr><td><code>struct</code></td><td><code>SlaveGroup</code></td><td><code>SubDeviceGroup</code></td></tr>
<tr><td><code>struct</code></td><td><code>SlaveGroupRef</code></td><td><code>SubDeviceGroupRef</code></td></tr>
<tr><td><code>struct</code></td><td><code>SlaveIdentity</code></td><td><code>SubDeviceIdentity</code></td></tr>
<tr><td><code>struct</code></td><td><code>SlavePdi</code></td><td><code>SubDevicePdi</code></td></tr>
<tr><td><code>struct</code></td><td><code>SlaveRef</code></td><td><code>SubDeviceRef</code></td></tr>
<tr><td><code>variant</code></td><td><code>AlStatusCode::SlaveNeedsColdStart</code></td><td><code>AlStatusCode::SubDeviceNeedsColdStart</code></td></tr>
<tr><td><code>variant</code></td><td><code>AlStatusCode::SlaveNeedsInit</code></td><td><code>AlStatusCode::SubDeviceNeedsInit</code></td></tr>
<tr><td><code>variant</code></td><td><code>AlStatusCode::SlaveNeedsPreop</code></td><td><code>AlStatusCode::SubDeviceNeedsPreop</code></td></tr>
<tr><td><code>variant</code></td><td><code>AlStatusCode::SlaveNeedsRestartedLocally</code></td><td><code>AlStatusCode::SubDeviceNeedsRestartedLocally</code></td></tr>
<tr><td><code>variant</code></td><td><code>AlStatusCode::SlaveNeedsSafeop</code></td><td><code>AlStatusCode::SubDeviceNeedsSafeop</code></td></tr>
<tr><td><code>variant</code></td><td><code>Error::UnknownSlave</code></td><td><code>Error::UnknownSubDevice</code></td></tr>
</tbody></table>
<p>This is largely a find and replace operation, but it's still a non-zero effort. Apologies for the
churn, but now EtherCrab is more consistent with ETG documentation, and the oddly named <code>Client</code>
struct is now called <code>MainDevice</code>. Frankly I don't know why I called it <code>Client</code> - it should've been
<code>Master</code> or <code>Controller</code>. It's fixed now anyway üôÇ.</p>
<h1 id="freebsd-netbsd-support"><a class="zola-anchor" href="#freebsd-netbsd-support" aria-label="Anchor link for: freebsd-netbsd-support">FreeBSD/NetBSD support</a></h1>
<p>EtherCrab now supports FreeBSD and NetBSD! It might support other BSDs too although it hasn't been
tested against anything but FreeBSD. If you use a BSD, please give EtherCrab a try and open any
issues on <a href="https://github.com/ethercrab-rs/ethercrab/issues">GitHub</a> - I'm not too familiar with the
BSD ecosystem.</p>
<h1 id="other-smaller-changes"><a class="zola-anchor" href="#other-smaller-changes" aria-label="Anchor link for: other-smaller-changes">Other smaller changes</a></h1>
<ul>
<li>MSRV is now 1.77, increased from 1.75.</li>
<li>Strings loaded from SubDevices are now required to be valid ASCII. Previously, UTF-8 strings were
accepted however the EtherCAT spec defines strings as ASCII-only (technically a subset of the full
ASCII set).</li>
<li>Some small changes to some <code>Error</code> variants to reduce the size of the enum on embedded systems.</li>
</ul>
</div>

  <footer role="contentinfo" class="footer">
  <a rel="me" href="https://mastodon.social/@jamwaffles">&nbsp;</a>

  <div class="inner">
    <div class="footer__bio">
      

      <div class="footer__bio__text">Personal blog of Rust developer and hobby CNC machinist James Waples. Living in Edinburgh, Scotland üè¥Û†ÅßÛ†Å¢Û†Å≥Û†Å£Û†Å¥Û†Åø ‚ù§Ô∏è</div>
    </div>

    <div class="footer__links">
      <a href="https:&#x2F;&#x2F;wapl.es">James Waples&#x27; Internet Hole</a>

      <a
        href="/atom.xml"
        id="btn_feed"
        class="btn"
        title="Feed"
        target="_blank"
      >
        <span aria-hidden="true" data-icon=")"></span>
        RSS Feed
      </a>

       <!-- <a
        href="https://mastodon.social/@jamwaffles"
        class="btn"
        title="@jamwaffles on Mastodon"
        target="_blank"
      >
        <span aria-hidden="true" data-icon=")"></span>
        Mastodon
      </a>-->

      <span>Published with <a href="https://www.getzola.org">Zola</a></span>
    </div>
  </div>
</footer>

</article>


    

    <script
      data-goatcounter="https://jamwaffles.goatcounter.com/count"
      async
      src="//gc.zgo.at/count.js"
    ></script>
  </body>
</html>
